pico-8 cartridge // http://www.pico-8.com
version 32
__lua__
-- hp bars
-- by sestrenexsis
-- https://github.com/sestrenexsis/workshop

function _init()
	_bar={
		x=1,
		y=8,
		wd=102,
		ht=6,
		plt=1,
	}
	_hpbar={
		x=2,
		y=9,
		wd=100,
		ht=4,
		plt=8,
	}
	_hpmax=100
	_hp=flr(rnd(100))
	_hplst=_hp
end

function _update60()
	if btnp(‚ùé) then
		_hp=flr(rnd(100))
	end
	if _hp<_hplst then
		_hplst-=1
		if _hplst<_hp then
			_hplst=_hp
		end
	elseif _hp>_hplst then
		_hplst+=1
		if _hplst>_hp then
			_hplst=_hp
		end
	end
end

function _draw()
	cls()
	rectfill(
		_bar.x,
		_bar.y,
		_bar.x+_bar.wd,
		_bar.y+_bar.ht,
		_bar.plt
	)
	local lst=mid(0,_hplst/_hpmax,1)
	rectfill(
		_hpbar.x,
		_hpbar.y,
		(_hpbar.x+_hpbar.wd)*lst,
		_hpbar.y+_hpbar.ht,
		_hpbar.plt
	)
	local hp=mid(0,_hp/_hpmax,1)
	local plt=10
	local ofs=1
	if _hplst<_hp then
		ofs=0
		plt=14
	end
	if _hplst!=_hp then
		rectfill(
			(_hpbar.x+_hpbar.wd)*hp+ofs,
			_hpbar.y,
			(_hpbar.x+_hpbar.wd)*lst,
			_hpbar.y+_hpbar.ht,
			plt
		)
	end
	print(_hp.." "..hp)
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
900100000000000000030001d44000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0001000007650016001660019600206002140028600000002d60000000326003660024600000003860000000386003860000000376003460000000306002c60027600246001f6001d6001c6001c6000000000000
000100001265000000166000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
